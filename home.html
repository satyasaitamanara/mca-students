<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script>
        document.addEventListener("DOMContentLoaded", async function () {
    const rollno = localStorage.getItem('rollno');
    console.log(localStorage.getItem("rollno"));

    if (!rollno || rollno === "undefined") {
        alert("Error: You must log in first!");
        window.location.href = "index.html";
        return;
    }

    try {
        // Fetch user details
        const response = await fetch(`https://mca-students.onrender.com/user/${rollno}`);

        if (!response.ok) {
            throw new Error("Failed to fetch user details. Server returned: " + response.status);
        }

        const result = await response.json();

        if (result.success) {
            document.getElementById("name").innerText = result.user.name;
            document.getElementById("rollno").innerText = result.user.rollno;
            document.getElementById("email").innerText = result.user.email;
            document.getElementById("attendance").innerText = result.user.attendance_percentage + "%";

            // Set the correct image source for the user
            document.getElementById("displayImage").src = `https://mca-students.onrender.com/get-image/${rollno}`;
        } else {
            alert("Error: User not found.");
            window.location.href = "index.html";
        }
    } catch (error) {
        console.error("Error fetching user data:", error);
        alert("Server error! Please try again later.");
        window.location.href = "index.html";
    }
});

    </script>
</head>
<body>
  <header>
    <img src="images/AKNU_logo.jpeg" alt="college logo" class="aknu-logo">
    <nav class="navbar">
      <button class="menu-toggle" onclick="toggleMenu()">Menu â˜°</button>
      <div class="header-logo">
        <div>HOME</div>
        <div>ABOUT US</div>
        <div>ADMINISTRATION</div>
        <div>FACILITIES</div>
        <div>DEPARTMENT</div>
        <div>SERVICE</div>
        <div>CONTACT US</div>
      </div>
    </nav>
  </header>
  

    <marquee class="notification" onmouseover="this.stop();" onmouseout="this.start();">
        <p><a> <!--*Academic Bank of Credits(ABC) | An initiative of Govt. of India under National Education Policy(NEP) 2020
            | Online portal for storage and transfer of academic credits and certificates. | Create an ABC ID | 
            Students from 2021-2022 A.B. | Laste date for generating ABC ID 31<sup>st</sup> August 2024 ||--> *Those who have passed their B.Sc. 
            with Mathematics &amp; Physics as major/minor subjects can apply for M.Sc. Geophysics vacant seats in Adikavi Nannaya University* </a></p>
    </marquee>
    <main >
        <div class="content">
            <div>
                <img src="images/vc image.jpeg" alt="vc image" class="VC-img">
            </div>
            
            <div id="carouselExampleIndicators" class="carousel slide">
                <div class="carousel-indicators">
                  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
                </div>
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <img src="images/university gate.jpeg" class="d-block w-100" alt="university gate">
                  </div>
                  <div class="carousel-item">
                    <img src="images/AKNU Convention Center.jpg" class="d-block w-100" alt="AKNU_convention center">
                  </div>
                  <div class="carousel-item">
                    <img src="images/AKNU N-Block.jpg" class="d-block w-100" alt="AKNU N-Block">
                  </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>


            <div class="student-details">
                <div >
                <h2 class="student-profile">Student Profile</h2>
                <div class="detail-row">
               <h2>Welcome, <span id="name"></span></h2>
                </div>
                <div class="detail-row">
                    <h2>Student ID:</h2>
                    <span id="rollno"></span>
                </div>
                <div class="detail-row">
                    <h2>Email:</h2>
                    <span id="email"></span>
                </div>
                <div class="detail-row">
                    <h2>Grade:</h2>
                    <span id="email" >A</span>
                </div>
                <div class="detail-row">
                    <p><h2>Attendance Percentage:</h2> <span id="attendance"></span></p>
               </div> 
             </div>
                <div class="student-img">
                    <h3 >Student photo</h3>
                    <img id="displayImage" src="" alt="Image not found" >
                </div>
                
            </div> 
        </div>
       
    </main>
    <footer>
        <img src="images/home-footer.jpeg" class="footer-img" alt="footer-img">
    </footer>
    <script src="	https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>  
    <script>
      function toggleMenu() {
        document.querySelector('.header-logo').classList.toggle('show');
      }
    </script>
    
    
    
</body>
</html>






